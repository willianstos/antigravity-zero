#!/bin/bash
# ðŸ¦… Open Code Sovereign Wrapper (v12.0)
# Carrega automaticamente as chaves do .env e executa o Open Code com identidade.

# 1. Carregar variÃ¡veis de ambiente
if [ -f .env ]; then
    export $(grep -v '^#' .env | xargs)
fi

# 2. Configurar identidade Git (se nÃ£o estiver configurada)
if [ -z "$(git config --global user.email)" ]; then
    git config --global user.email "jarvis@antigravity.sov"
    git config --global user.name "Jarvis Sovereign"
fi

# 3. Executar Open Code com os argumentos passados
# Se nenhum argumento for passado, abre o modo interativo (TUI)
echo "ðŸ¦… Iniciando Open Code (Sovereign Mode)..."
echo "ðŸ”‘ Keys carregadas: OpenAI, Perplexity, GitHub."

if [ $# -eq 0 ]; then
    /usr/bin/opencode
else
    /usr/bin/opencode "$@"
fi
