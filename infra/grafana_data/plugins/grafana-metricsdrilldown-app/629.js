"use strict";(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[629],{3388(e,t,n){n.d(t,{E:()=>d});var a=n(46089),r=n(89642),c=n(82007),o=n(85959),i=n.n(o),s=n(81159),l=n(30858),m=n(58544);function d({error:e}){const t=(0,c.useStyles2)(u),n=(0,s.useNavigate)(),{pathname:a,search:d}=(0,s.useLocation)(),p=(0,o.useCallback)(()=>{const e=new URLSearchParams(d),t=new URLSearchParams;["from","to","timezone"].filter(t=>e.has(t)).forEach(n=>t.set(n,e.get(n))),n({pathname:a,search:t.toString()}),window.location.reload()},[n,a,d]),[g,f]=(0,o.useState)(!1);return i().createElement("div",{className:t.container},i().createElement(l.C,null),i().createElement(m._,{severity:"error",title:(0,r.t)("error-view.title","Fatal error!"),error:e,errorContext:{handheldBy:"React error boundary"},message:i().createElement(i().Fragment,null,i().createElement("p",{className:t.message},i().createElement(r.x6,{i18nKey:"error-view.message"},"Please"," ",i().createElement(c.TextLink,{href:"#",onClick:p},"try reloading the page")," ","or, if the problem persists, contact your organization admin. Sorry for the inconvenience.")),i().createElement("p",null,i().createElement(c.Collapse,{className:t.callStack,label:(0,r.t)("error-view.stack-trace-label","View stack trace"),isOpen:g,onToggle:()=>f(!g)},i().createElement("pre",null,i().createElement("code",null,e.stack)))))}))}function u(e){return{container:(0,a.css)({position:"relative",margin:e.spacing(2)}),message:(0,a.css)({margin:e.spacing(2,0,1,0)}),callStack:(0,a.css)({backgroundColor:"transparent",border:"0 none","& button":(0,a.css)({paddingLeft:e.spacing(1.5)}),"& button:focus":(0,a.css)({outline:"none",boxShadow:"none"}),"& button > svg":(0,a.css)({marginLeft:e.spacing(-2),marginRight:e.spacing(.5)}),'& [class$="collapse__loader"]':(0,a.css)({display:"none"})})}}},30858(e,t,n){n.d(t,{C:()=>l});var a=n(46089),r=n(82007),c=n(85959),o=n.n(c),i=n(43939),s=n(66423);function l(){const e=(0,r.useStyles2)(m);return o().createElement("div",{className:e.container},o().createElement(r.Stack,{direction:"row",gap:1,alignItems:"center"},o().createElement(i.l,{className:e.feedbackStatic}),o().createElement(s.U,null)))}function m(e){return{container:(0,a.css)({position:"absolute",top:e.spacing(2),right:e.spacing(2),zIndex:e.zIndex.dropdown}),feedbackStatic:(0,a.css)({position:"static"})}}},75629(e,t,n){n.r(t),n.d(t,{MiniBreakdown:()=>p,default:()=>f});var a=n(46089),r=n(82007),c=n(85959),o=n.n(c),i=n(3388),s=n(7291),l=n(69642),m=n(85187),d=n(25576),u=n(82402);const p=({query:e,initialStart:t,initialEnd:n,dataSource:a})=>{const[p]=(0,s.n)(),f=(0,r.useStyles2)(g),h=(0,c.useRef)(!1);(0,c.useEffect)(()=>{h.current||(h.current=!0,(0,l.z)("exposed_component_viewed",{component:"mini_breakdown"}))},[]);const{metric:w,labels:E}=(0,d.$9)(e),b=(0,c.useMemo)(()=>(0,m.ef)({metric:w,initialDS:a,initialFilters:E.map(({label:e,op:t,value:n})=>({key:e,operator:t,value:n})),$timeRange:(0,u._)(t,n),embedded:!0,embeddedMini:!0}),[w,a,E,t,n]);return o().createElement("div",{"data-testid":"metrics-drilldown-mini-breakdown",className:f.container},p?o().createElement(i.E,{error:p}):o().createElement(b.Component,{model:b}))};function g(){return{container:(0,a.css)({width:"300px"})}}const f=p},82402(e,t,n){n.d(t,{_:()=>o});var a=n(87781),r=n(67477);function c(e){return"string"==typeof e&&a.dateMath.isMathString(e)?e:a.dateMath.toDateTime(new Date(e),{roundUp:!1}).toISOString()}function o(e,t){return new r.SceneTimeRange({from:c(e),to:c(t)})}}}]);
//# sourceMappingURL=629.js.map?_cache=7596f196681baee41999