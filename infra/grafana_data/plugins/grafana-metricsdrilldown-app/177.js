"use strict";(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[177],{62427(e,t,a){a.d(t,{BR:()=>l,Hi:()=>c,KF:()=>r});var n=a(85959);const r=(0,a(85187).ef)(),l=(0,n.createContext)({trail:r});function c(){return(0,n.useContext)(l)}},3388(e,t,a){a.d(t,{E:()=>u});var n=a(46089),r=a(89642),l=a(82007),c=a(85959),o=a.n(c),i=a(81159),s=a(30858),m=a(58544);function u({error:e}){const t=(0,l.useStyles2)(d),a=(0,i.useNavigate)(),{pathname:n,search:u}=(0,i.useLocation)(),p=(0,c.useCallback)(()=>{const e=new URLSearchParams(u),t=new URLSearchParams;["from","to","timezone"].filter(t=>e.has(t)).forEach(a=>t.set(a,e.get(a))),a({pathname:n,search:t.toString()}),window.location.reload()},[a,n,u]),[g,E]=(0,c.useState)(!1);return o().createElement("div",{className:t.container},o().createElement(s.C,null),o().createElement(m._,{severity:"error",title:(0,r.t)("error-view.title","Fatal error!"),error:e,errorContext:{handheldBy:"React error boundary"},message:o().createElement(o().Fragment,null,o().createElement("p",{className:t.message},o().createElement(r.x6,{i18nKey:"error-view.message"},"Please"," ",o().createElement(l.TextLink,{href:"#",onClick:p},"try reloading the page")," ","or, if the problem persists, contact your organization admin. Sorry for the inconvenience.")),o().createElement("p",null,o().createElement(l.Collapse,{className:t.callStack,label:(0,r.t)("error-view.stack-trace-label","View stack trace"),isOpen:g,onToggle:()=>E(!g)},o().createElement("pre",null,o().createElement("code",null,e.stack)))))}))}function d(e){return{container:(0,n.css)({position:"relative",margin:e.spacing(2)}),message:(0,n.css)({margin:e.spacing(2,0,1,0)}),callStack:(0,n.css)({backgroundColor:"transparent",border:"0 none","& button":(0,n.css)({paddingLeft:e.spacing(1.5)}),"& button:focus":(0,n.css)({outline:"none",boxShadow:"none"}),"& button > svg":(0,n.css)({marginLeft:e.spacing(-2),marginRight:e.spacing(.5)}),'& [class$="collapse__loader"]':(0,n.css)({display:"none"})})}}},30858(e,t,a){a.d(t,{C:()=>s});var n=a(46089),r=a(82007),l=a(85959),c=a.n(l),o=a(43939),i=a(66423);function s(){const e=(0,r.useStyles2)(m);return c().createElement("div",{className:e.container},c().createElement(r.Stack,{direction:"row",gap:1,alignItems:"center"},c().createElement(o.l,{className:e.feedbackStatic}),c().createElement(i.U,null)))}function m(e){return{container:(0,n.css)({position:"absolute",top:e.spacing(2),right:e.spacing(2),zIndex:e.zIndex.dropdown}),feedbackStatic:(0,n.css)({position:"static"})}}},99251(e,t,a){a.d(t,{S:()=>m,X:()=>i});var n=a(85959),r=a.n(n),l=a(81159),c=a(4405),o=a(62427);const i=(0,n.lazy)(()=>a.e(946).then(a.bind(a,91946))),s=()=>{const e=(0,l.useLocation)();return r().createElement(l.Navigate,{to:`${c.b.Drilldown}${e.search}`,replace:!0})},m=()=>{const{trail:e}=(0,o.Hi)();return r().createElement(l.Routes,null,r().createElement(l.Route,{path:c.b.Drilldown,element:r().createElement(i,{trail:e})}),r().createElement(l.Route,{path:c.b.Trail,element:r().createElement(s,null)}),r().createElement(l.Route,{path:"*",element:r().createElement(l.Navigate,{to:c.b.Drilldown,replace:!0})}))}},63177(e,t,a){a.r(t),a.d(t,{default:()=>d});var n=a(85959),r=a.n(n),l=a(3388),c=a(99251),o=a(7291),i=a(69642),s=a(85187),m=a(25576),u=a(82402);const d=({query:e,initialStart:t,initialEnd:a,dataSource:d})=>{const[p]=(0,o.n)(),g=(0,n.useRef)(!1);(0,n.useEffect)(()=>{g.current||(g.current=!0,(0,i.z)("exposed_component_viewed",{component:"label_breakdown"}))},[]);const{metric:E,labels:f}=(0,m.$9)(e),b=(0,s.ef)({metric:E,initialDS:d.uid,initialFilters:f.map(({label:e,op:t,value:a})=>({key:e,operator:t,value:a})),$timeRange:(0,u._)(t,a),embedded:!0});return r().createElement("div",{"data-testid":"metrics-drilldown-embedded-label-breakdown"},p?r().createElement(l.E,{error:p}):r().createElement(c.X,{trail:b}))}},82402(e,t,a){a.d(t,{_:()=>c});var n=a(87781),r=a(67477);function l(e){return"string"==typeof e&&n.dateMath.isMathString(e)?e:n.dateMath.toDateTime(new Date(e),{roundUp:!1}).toISOString()}function c(e,t){return new r.SceneTimeRange({from:l(e),to:l(t)})}}}]);
//# sourceMappingURL=177.js.map?_cache=dd5af5c6eb19f40c093a