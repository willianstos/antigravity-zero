#!/bin/bash
# ğŸ§  Pipeline de UnificaÃ§Ã£o de MemÃ³ria (H2 Soberano)

echo "ğŸ¦… Iniciando SincronizaÃ§Ã£o de MemÃ³ria: Antigravity â†” OpenClaw"
echo "------------------------------------------------------------"

# 1. Indexar SOUL e IDENTITY (A EssÃªncia)
echo "ğŸ¦… Sincronizando a Alma do Bot..."
node bin/universal-ingest.mjs SOUL.md domain-code
node bin/universal-ingest.mjs IDENTITY.md domain-code

# 2. Indexar Skills e Rules (A InteligÃªncia)
echo "ğŸ“œ Indexando Regras e Skills da Soberania..."
for f in .agent/skills/**/*.md; do node bin/universal-ingest.mjs "$f" domain-code; done
for f in .agent/rules/*.md; do node bin/universal-ingest.mjs "$f" domain-code; done

# 3. Validar Status no Qdrant
echo -n "ğŸ“Š Total de Pontos na MemÃ³ria Ativa (domain-code): "
curl -s http://localhost:6333/collections/domain-code | jq '.result.points_count'

echo "------------------------------------------------------------"
echo "âœ… UnificaÃ§Ã£o ConcluÃ­da! O Bot agora conhece seu prÃ³prio cÃ³digo."
